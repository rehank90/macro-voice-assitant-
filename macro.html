<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARCO - Minimal</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #chat-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            height: 400px;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 10px;
        }
        #input-container {
            display: flex;
            gap: 10px;
        }
        #user-input {
            flex-grow: 1;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        button {
            padding: 8px 16px;
            background-color: #4f46e5;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .user-message {
            text-align: right;
            margin: 8px 0;
            color: #4f46e5;
        }
        .marco-message {
            margin: 8px 0;
            color: #333;
        }
        #login-container {
            text-align: center;
            margin: 100px auto;
            max-width: 350px;
            padding: 40px;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            backdrop-filter: blur(8px);
        }
        #login-container input {
            display: block;
            margin: 15px auto;
            padding: 12px 15px;
            width: 80%;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        #login-container input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }
        #tools-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .tool-btn {
            background-color: #10b981;
        }
        .active-tool {
            background-color: #4f46e5;
        }
        #login-btn {
            width: 85%;
            padding: 12px;
            margin-top: 20px;
            background: linear-gradient(135deg, #4f46e5 0%, #8b5cf6 100%);
            color: white;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2);
        }
        #login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(79, 70, 229, 0.3);
        }
    </style>
</head>
<body>
    <div id="login-container" style="display: block;">
        <div style="margin-bottom: 30px;">
            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin: 0 auto;">
                <path d="M12 4C13.0609 4 14.0783 4.42143 14.8284 5.17157C15.5786 5.92172 16 6.93913 16 8V12" stroke="#4f46e5" stroke-width="2" stroke-linecap="round"/>
                <path d="M12 20H8M12 20H16M12 20V16M12 20V24" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round"/>
                <path d="M19.415 7.594C20.156 8.186 20.756 8.93 21.175 9.775C21.594 10.619 21.822 11.544 21.844 12.485C21.866 13.426 21.682 14.36 21.305 15.219C20.928 16.078 20.368 16.841 19.666 17.451C18.964 18.062 18.139 18.504 17.253 18.743C16.368 18.983 15.444 19.013 14.546 18.832" stroke="#4f46e5" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <h1 style="margin: 10px 0 5px; font-size: 28px; color: #111827;">Welcome to MARCO</h1>
            <p style="color: #6b7280; font-size: 14px;">Your personal AI assistant</p>
        </div>
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="password" placeholder="Password" required>
        <button id="login-btn">Login with MARCO</button>
    </div>
    
    <div id="app-container" style="display: none;">
        <h1>MARCO</h1>
        <div id="tools-container">
            <button class="tool-btn" data-tool="chat">Chat</button>
            <button class="tool-btn" data-tool="image">Image Generator</button>
            <button class="tool-btn" data-tool="summary">Text Summary</button>
        </div>
        <div id="chat-container"></div>
        <div id="input-container">
            <input type="text" id="user-input" placeholder="Type your message...">
            <button id="send-btn">Send</button>
            <button id="mic-btn">ðŸŽ¤</button>
        </div>
    </div>

    <script>
        // DOM elements
        let loginContainer, appContainer, loginBtn, chatContainer, userInput, sendBtn, micBtn, toolBtns;

        function initApp() {
            loginContainer = document.getElementById('login-container');
            appContainer = document.getElementById('app-container');
            loginBtn = document.getElementById('login-btn');
            chatContainer = document.getElementById('chat-container');
            userInput = document.getElementById('user-input');
            sendBtn = document.getElementById('send-btn');
            micBtn = document.getElementById('mic-btn');
            toolBtns = document.querySelectorAll('.tool-btn');
        }

        function setupEventListeners() {
            loginBtn?.addEventListener('click', handleLogin);
            sendBtn?.addEventListener('click', handleSend);
            toolBtns?.forEach(btn => {
                btn.addEventListener('click', () => switchTool(btn.dataset.tool));
            });
            userInput?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSend();
            });
            micBtn?.addEventListener('click', toggleMic);
        }

        // Backend simulation
        function processCommand(input) {
            const lowerInput = input.toLowerCase();
            
            if (lowerInput.includes('hello') || lowerInput.includes('hi')) {
                return "Hello! How can I help you today?";
            } else if (lowerInput.includes('weather')) {
                return "Currently sunny with a high of 75Â°F.";
            } else if (lowerInput.includes('remind') || lowerInput.includes('reminder')) {
                return "I'll remind you about that. When should I remind you?";
            } else if (lowerInput.includes('thank')) {
                return "You're welcome!";
            } else {
                return "I'm analyzing your request... Here's what I found about: " + input;
            }
        }

        // UI functions
        function addMessage(text, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add(isUser ? 'user-message' : 'marco-message');
            messageDiv.textContent = (isUser ? "You: " : "MARCO: ") + text;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        async function handleSend() {
            const text = userInput.value.trim();
            if (!text) return;

            addMessage(text, true);
            userInput.value = '';
            userInput.focus();
            
            try {
                const response = await processCommand(text);
                addMessage(response, false);
            } catch (error) {
                addMessage("Sorry, I encountered an error processing your request.", false);
                console.error("Error processing command:", error);
            }
        }

        // Speech recognition
        function toggleMic() {
            if (!('webkitSpeechRecognition' in window)) {
                addMessage("Speech recognition not supported in your browser", false);
                return;
            }

            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            
            recognition.onstart = () => micBtn.textContent = 'ðŸ”´';
            recognition.onend = () => micBtn.textContent = 'ðŸŽ¤';
            
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                userInput.value = transcript;
                handleSend();
            };
            
            recognition.start();
        }

        function handleLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (!username || !password) {
                alert('Please enter both username and password!');
                return;
            }

            loginContainer.style.display = 'none';
            appContainer.style.display = 'block';

            // Clear any existing messages
            chatContainer.innerHTML = '';

            // Add welcome message
            addMessage(`Welcome back, ${username}! How can I help you today?`, false);

            // Setup chat interface
            setupEventListeners();
        }

        function switchTool(tool) {
            toolBtns.forEach(btn => btn.classList.remove('active-tool'));
            event.target.classList.add('active-tool');
            
            if (tool === 'image') {
                addMessage("Image generator is ready. Describe what you want to create.", false);
            } else if (tool === 'summary') {
                addMessage("Paste text you'd like me to summarize.", false);
            } else {
                addMessage("Chat mode activated. How can I help?", false);
            }
        }

        // Initialize app
        initApp();
        setupEventListeners();
    </script>
</body>
</html>
